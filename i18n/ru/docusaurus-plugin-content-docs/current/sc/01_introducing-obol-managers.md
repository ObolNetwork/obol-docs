---
description: Как сеть Obol выглядит в сети?
---

# Смарт-контракты Obol

Obol разрабатывает и поддерживает набор смарт-контрактов для использования с распределенными валидаторами.

## Участники вывода средств

Ключом к распределенному валидатору является понимание того, как обрабатывается вывод средств. Самый распространенный способ обработки вывода валидатора, управляемого несколькими разными людьми, — это использовать неизменяемый контракт получателя вывода с жестко закодированными в нем правилами распределения.

For the time being Obol uses `0x01` withdrawal credentials, and intends to upgrade to [0x03 withdrawal credentials](https://ethresear.ch/t/0x03-withdrawal-credentials-simple-eth1-triggerable-withdrawals/10021) when smart contract initiated exits are enabled. 
В настоящее время Obol использует учетные данные для вывода `0x01` и намеревается перейти на [учетные данные для вывода 0x03](https://ethresear.ch/t/0x03-withdrawal-credentials-simple-eth1-triggerable-withdrawals/10021), будут включены смарт-контрактом. 

### Собственный получатель вывода средств

```solidity title="WithdrawalRecipientOwnable.sol"
// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;

import "@openzeppelin/contracts/access/Ownable.sol";

contract WithdrawalRecipientOwnable is Ownable {
    receive() external payable {}

    function withdraw(address payable recipient) public onlyOwner {
        recipient.transfer(address(this).balance);
    }
}

```

Собственный получатель вывода средств — это самый простой тип контракта с получателем вывода средств. Он реализует интерфейс Open Zeppelin `Ownable` и позволяет одному адресу вызывать функцию `withdraw()`, которая вытягивает весь эфир с адреса на адрес владельца (или другой указанный адрес). Вызов вывода также может финансировать разделение платы на сеть Obol и / или протокол, который развернул и создал этот DV.

### Неизменяемый получатель вывода средств
 
Неизменный получатель вывода аналогичен получателю, которым можно владеть, за исключением того, что владелец жестко запрограммирован во время создания, а возможность смены владельца удалена. Этот контракт следует использовать только как часть более крупной системы смарт-контрактов, например, стратегия хранилища yearn может использовать неизменяемый контракт получателя, поскольку его адрес хранилища никогда не должен меняться. 

## Реестры

### Реестр депозитов

Депозитный реестр позволяет сделать депозит и активацию распределенных валидаторов двумя отдельными процессами. В простом случае для DV регистр депозитов не требуется. Однако, когда лицо, вносящее эфир, не является той же организацией, что и операторы, производящие депозиты, необходим механизм координации, чтобы убедиться, что на каждый DV отправляется только один депозит в 32 eth. Реестр депозитов может предотвратить двойные депозиты, отдав распоряжение о выделении эфира депозитам валидаторов. 

### Реестр операторов

Если подача депозитов в реестр депозитов должна ограничиваться только адресами из белого списка, простой реестр операторов может служить способом контроля того, кто может подавать депозиты в реестр депозитов.


### Реестр валидаторов

Если необходимо управлять валидаторами в цепочке программно, а не вручную, когда люди инициируют выход, можно использовать реестр валидаторов. Депозиты, которые активируются, получают запись в реестре валидаторов, а валидаторы, использующие выходы 0x03, готовятся к удалению из реестра. Этот реестр можно использовать для координации множества валидаторов с похожими операторами и конфигурацией. 

:::note

Реестры валидаторов зависят от еще не реализованной фичи выхода валидатора `0x03`.

:::

