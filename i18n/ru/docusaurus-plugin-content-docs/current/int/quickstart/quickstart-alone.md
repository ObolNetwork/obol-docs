---
sidebar_position: 4
description: Запуск всех узлов в распределенном кластере валидатора
---

# Запуск кластера в одиночку

:::caution
Charon находится в ранней альфа-версии и не готов к запуску в основной сети
:::

1. Склонируйте репозиторий [charon-distributed-validator-cluster](https://github.com/ObolNetwork/charon-distributed-validator-cluster) и перейдите в директорию `cd`.

   ```sh
   # Склонируйте репозиторий
   git clone https://github.com/ObolNetwork/charon-distributed-validator-cluster.git

   # Смените директорию
   cd charon-distributed-validator-cluster/
   ```

1. Подготовка окружения

   ```sh
   # Скопируйте файл с переменными среды
   cp .env.sample .env
   ```

   Для простоты этот репозиторий настроен для работы с удаленным узлом Beacon, например, из 
   [Infura](https://infura.io/).

   Создайте проект Eth2 и скопируйте URL-адрес `https`, убедитесь, что Prater выбран в раскрывающемся списке ENDPOINTS:

   ![Пример Infura API Endpoint](/img/example-infura-details.png)

   Замените значение `CHARON_BEACON_NODE_ENDPOINT` во вновь созданном файле `.env` этим URL-адресом.

1. Сгенерируйте файлы, необходимые для запуска кластера распределенного валидатора тестовой сети

   ```sh
   # Создайте кластер распределенного валидатора тестовой сети
   docker run --rm -v "$(pwd):/opt/charon" ghcr.io/obolnetwork/charon:v0.8.1 create cluster --withdrawal-address="0x000000000000000000000000000000000000dead"
   ```

1. Запуск кластера
   ```sh
   # Запустите кластер распределенного валидатора
   docker-compose up
   ```
1. Проверьте панель мониторинга и посмотрите, все ли в порядке

   ```sh
   # Откройте Grafana
   open http://localhost:3000/d/laEp8vupp
   ```

1. Активируйте валидатор в тестовой сети, используя оригинальный [staking launchpad](https://prater.launchpad.ethereum.org/en/overview) сайт с данными депозита созданными в `.charon/cluster/deposit-data.json`.
   - Если вы используете Mac OS, `.charon`, выходная папка по умолчанию, не отображается в средстве выбора файлов найдите "Upload Deposit Data" на панели запуска. Rectify this by pressing `Command + Shift + . ` . Это должно отображать скрытые папки, позволяя вам выбрать файл депозита.

Поздравляем, если всё сработало корректно, теперь вы запускаете кластер распределенного валидатора в тестовой сети. Попробуйте отключить один из четырех узлов с помощью `docker stop` и посмотрите, остается ли валидатор в сети или начинает пропускать свои обязанности, чтобы убедиться в отказоустойчивости, которую можно добавить к проверке подтверждения доли с помощью этой новой Технологии Распределенного Валидатора (Distributed Validator Technology).

:::tip
Не забудьте быть хорошим распорядителем тестовой сети и выйти из валидатора, когда закончите тестирование.
:::
