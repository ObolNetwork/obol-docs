<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v0.17.0 docs-doc-page docs-doc-id-charon/intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Introduction | Obol Network</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.obol.org/v0.17.0/charon/intro"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="/img/obol_og_image.png"><meta data-rh="true" property="og:image:width" content="1200"><meta data-rh="true" property="og:image:height" content="630"><meta data-rh="true" name="docusaurus_version" content="v0.17.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v0.17.0"><meta data-rh="true" name="docsearch:version" content="v0.17.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v0.17.0"><meta data-rh="true" property="og:title" content="Introduction | Obol Network"><meta data-rh="true" name="description" content="Charon - The Distributed Validator Client"><meta data-rh="true" property="og:description" content="Charon - The Distributed Validator Client"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.obol.org/v0.17.0/charon/intro"><link data-rh="true" rel="alternate" href="https://docs.obol.org/v0.17.0/charon/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.obol.org/v0.17.0/charon/intro" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DTT2S469C4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DTT2S469C4",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.c578c793.css">
<script src="/assets/js/runtime~main.eb7ecd11.js" defer="defer"></script>
<script src="/assets/js/main.98818e41.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ObolIconDark.svg" alt="Obol Network Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/ObolIconLight.svg" alt="Obol Network Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Obol Network</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/v0.17.0/int/Overview">Docs</a><a class="navbar__item navbar__link" href="/api">API</a><a class="navbar__item navbar__link" href="/sdk">SDK</a><a href="https://blog.obol.tech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/obolnetwork/obol-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v0.17.0/charon/intro">v0.17.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/learn/intro/obol-collective">Next</a></li><li><a class="dropdown__link" href="/charon/intro">v1.1.2</a></li><li><a class="dropdown__link" href="/v1.1.1/charon/intro">v1.1.1</a></li><li><a class="dropdown__link" href="/v1.1.0/charon/intro">v1.1.0</a></li><li><a class="dropdown__link" href="/v1.0.0/charon/intro">v1.0.0</a></li><li><a class="dropdown__link" href="/v0.19.2/charon/intro">v0.19.2</a></li><li><a class="dropdown__link" href="/v0.19.1/charon/intro">v0.19.1</a></li><li><a class="dropdown__link" href="/v0.19.0/charon/intro">v0.19.0</a></li><li><a class="dropdown__link" href="/v0.18.0/charon/intro">v0.18.0</a></li><li><a class="dropdown__link" href="/v0.17.1/charon/intro">v0.17.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v0.17.0/charon/intro">v0.17.0</a></li><li><a class="dropdown__link" href="/v0.16.0/charon/intro">v0.16.0</a></li><li><a class="dropdown__link" href="/v0.15.0/charon/intro">v0.15.0</a></li><li><a class="dropdown__link" href="/v0.14.4/charon/intro">v0.14.4</a></li><li><a class="dropdown__link" href="/v0.14.0/charon/intro">v0.14.0</a></li><li><a class="dropdown__link" href="/v0.13.0/charon/intro">v0.13.0</a></li><li><a class="dropdown__link" href="/v0.12.0/intro">v0.12.0</a></li><li><a class="dropdown__link" href="/v0.11.0/intro">v0.11.0</a></li><li><a class="dropdown__link" href="/v0.10.1/intro">v0.10.1</a></li><li><a class="dropdown__link" href="/v0.10.0/intro">v0.10.0</a></li><li><a class="dropdown__link" href="/v0.9.0/intro">v0.9.0</a></li><li><a class="dropdown__link" href="/v0.8.1/intro">v0.8.1</a></li><li><a class="dropdown__link" href="/v0.8.0/intro">v0.8.0</a></li><li><a class="dropdown__link" href="/v0.7.0/intro">v0.7.0</a></li><li><a class="dropdown__link" href="/v0.6.1/intro">v0.6.1</a></li><li><a class="dropdown__link" href="/v0.6.0/intro">v0.6.0</a></li><li><a class="dropdown__link" href="/v0.5.0/intro">v0.5.0</a></li><li><a class="dropdown__link" href="/v0.4.0/intro">v0.4.0</a></li><li><a class="dropdown__link" href="/v0.3.0/intro">v0.3.0</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-v0.17.0"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.17.0/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/v0.17.0/int/Overview">Getting started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/Overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/key-concepts">Key concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/v0.17.0/int/quickstart">Quickstart Guides</a><button aria-label="Collapse sidebar category &#x27;Quickstart Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/v0.17.0/int/quickstart/alone/test-locally">Create a DV alone</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/v0.17.0/int/quickstart/group">Create a DV as a group</a><button aria-label="Expand sidebar category &#x27;Create a DV as a group&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/quickstart/activate-dv">Activate a DV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/quickstart/quickstart-exit">Exit a DV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/quickstart/update">Update a DV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/int/quickstart/quickstart-mainnet">Run a DV on mainnet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/v0.17.0/int/quickstart/advanced/quickstart-sdk">Advanced Guides</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/v0.17.0/int/faq/general">FAQ</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/v0.17.0/charon/intro">Charon</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v0.17.0/charon/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/charon/dkg">Distributed Key Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/charon/cluster-configuration">Cluster configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/charon/networking">Charon networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v0.17.0/charon/charon-cli-reference">CLI reference</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v0.17.0/dvl/intro">DV Launchpad</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v0.17.0/sc/introducing-obol-managers">Smart contracts</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v0.17.0/testnet">Testnets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v0.17.0/sec/overview">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v0.17.0/cg/bug-report">Contribution &amp; Feedback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v0.17.0/fr/eth">Further reading</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Obol Network<!-- --> <b>v0.17.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/charon/intro">latest version</a></b> (<!-- -->v1.1.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Charon</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v0.17.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header>
<p>This section introduces and outlines the Charon <em>[kharon]</em> middleware, Obol&#x27;s implementation of DVT. Please see the <a href="/v0.17.0/int/key-concepts">key concepts</a> section as background and context.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-charon">What is Charon?<a href="#what-is-charon" class="hash-link" aria-label="Direct link to What is Charon?" title="Direct link to What is Charon?">​</a></h2>
<p>Charon is a GoLang-based, HTTP middleware built by Obol to enable any existing Ethereum validator clients to operate together as part of a distributed validator.</p>
<p>Charon sits as a middleware between a normal validating client and its connected beacon node, intercepting and proxying API traffic. Multiple Charon clients are configured to communicate together to come to consensus on validator duties and behave as a single unified proof-of-stake validator together. The nodes form a cluster that is <em>byzantine-fault tolerant</em> and continues to progress assuming a supermajority of working/honest nodes is met.</p>
<p><img decoding="async" loading="lazy" alt="Charon Cluster" src="/assets/images/DVCluster-d161355b3dfd1808a86148c8fe28271e.png" width="1200" height="630" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="charon-architecture">Charon Architecture<a href="#charon-architecture" class="hash-link" aria-label="Direct link to Charon Architecture" title="Direct link to Charon Architecture">​</a></h2>
<p>Charon is an Ethereum proof of stake distributed validator (DV) client. Like any validator client, its main purpose is to perform validation duties for the Beacon Chain, primarily attestations and block proposals. The beacon client handles a lot of the heavy lifting, leaving the validator client to focus on fetching duty data, signing that data, and submitting it back to the beacon client.</p>
<p>Charon is designed as a generic event-driven workflow with different components coordinating to perform validation duties. All duties follow the same flow, the only difference being the signed data. The workflow can be divided into phases consisting of one or more components:</p>
<p><img decoding="async" loading="lazy" alt="Charon Workflow" src="/assets/images/workflow-de4700cb1dd4e2adf00f90bf14a2dd3a.jpg" width="455" height="540" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="determine-when-duties-need-to-be-performed">Determine <strong>when</strong> duties need to be performed<a href="#determine-when-duties-need-to-be-performed" class="hash-link" aria-label="Direct link to determine-when-duties-need-to-be-performed" title="Direct link to determine-when-duties-need-to-be-performed">​</a></h3>
<p>The beacon chain is divided into <a href="https://eth2book.info/bellatrix/part3/config/types/#slot" target="_blank" rel="noopener noreferrer">slots</a> and <a href="https://eth2book.info/bellatrix/part3/config/types/#epoch" target="_blank" rel="noopener noreferrer">epochs</a>, which divides it into deterministically fixed-size time chunks.
The first step is to determine when (which slot/epoch) duties need to be performed. This is done by the <code>scheduler</code> component.
It queries the beacon node to detect which validators defined in the cluster lock are active, and what duties they need to perform for
the upcoming epoch and slots. When such a slot starts, the <code>scheduler</code> emits an event indicating which validator needs to perform what duty.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-and-come-to-consensus-on-what-data-to-sign">Fetch and come to consensus on <strong>what</strong> data to sign<a href="#fetch-and-come-to-consensus-on-what-data-to-sign" class="hash-link" aria-label="Direct link to fetch-and-come-to-consensus-on-what-data-to-sign" title="Direct link to fetch-and-come-to-consensus-on-what-data-to-sign">​</a></h3>
<p>A DV cluster consists of multiple operators each provided with one of the M-of-N threshold BLS private key shares per validator.
The key shares are imported into the validator clients which produce partial signatures.
Charon threshold aggregates these partial signatures before broadcasting them to the Beacon Chain.
<em>But to threshold aggregate partial signatures, each validator must sign the same data.</em>
The cluster must therefore coordinate and come to a consensus on what data to sign.</p>
<p><code>Fetcher</code> fetches the unsigned duty data from the beacon node upon receiving an event from <code>Scheduler</code>.<br>
<!-- -->For attestations, this is the unsigned attestation, for block proposals, this is the unsigned block.</p>
<p>The <code>Consensus</code> component listens to events from Fetcher and starts a <a href="https://docs.goquorum.consensys.net/configure-and-manage/configure/consensus-protocols/qbft/" target="_blank" rel="noopener noreferrer">QBFT</a> consensus game with the other
Charon nodes in the cluster for that specific duty and slot.
When consensus is reached, the resulting unsigned duty data is stored in the <code>DutyDB</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wait-for-the-vc-to-sign"><strong>Wait</strong> for the VC to sign<a href="#wait-for-the-vc-to-sign" class="hash-link" aria-label="Direct link to wait-for-the-vc-to-sign" title="Direct link to wait-for-the-vc-to-sign">​</a></h3>
<p>Charon is a <strong>middleware</strong> distributed validator client. That means Charon doesn’t have access to the
validator private key shares and cannot sign anything on demand.
Instead, operators import the key shares into industry-standard validator clients (VC)
that are configured to connect to their local Charon client instead of their local Beacon node directly.</p>
<p>Charon, therefore, serves the <a href="https://ethereum.github.io/beacon-APIs/#/" target="_blank" rel="noopener noreferrer">Ethereum Beacon Node API</a> from the <code>ValidatorAPI</code> component and
intercepts some endpoints while proxying other endpoints directly to the upstream Beacon node.</p>
<p>The VC queries the <code>ValidatorAPI</code> for unsigned data which is retrieved from the <code>DutyDB</code>. It then signs it and submits it
back to the <code>ValidatorAPI</code> which stores it in the <code>PartialSignatureDB</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="share-partial-signatures"><strong>Share</strong> partial signatures<a href="#share-partial-signatures" class="hash-link" aria-label="Direct link to share-partial-signatures" title="Direct link to share-partial-signatures">​</a></h3>
<p>The <code>PartialSignatureDB</code> stores the partially signed data submitted by the local Charon client’s VC.
But it also stores all the partial signatures submitted by the VCs of other peers in the cluster.
This is achieved by the <code>PartialSignatureExchange</code> component that exchanges partial signatures between all peers in the cluster.
All charon clients, therefore, store all partial signatures the cluster generates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="threshold-aggregate-partial-signatures"><strong>Threshold Aggregate</strong> partial signatures<a href="#threshold-aggregate-partial-signatures" class="hash-link" aria-label="Direct link to threshold-aggregate-partial-signatures" title="Direct link to threshold-aggregate-partial-signatures">​</a></h3>
<p>The <code>SignatureAggregator</code> is invoked as soon as sufficient (any M of N) partial signatures are stored in the <code>PartialSignatureDB</code>.
It performs BLS threshold aggregation of the partial signatures resulting in a final signature that is valid for the beacon chain.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="broadcast-final-signature"><strong>Broadcast</strong> final signature<a href="#broadcast-final-signature" class="hash-link" aria-label="Direct link to broadcast-final-signature" title="Direct link to broadcast-final-signature">​</a></h3>
<p>Finally, the <code>Broadcaster</code> component broadcasts the final threshold aggregated signature to the Beacon client, thereby completing the duty.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ports">Ports<a href="#ports" class="hash-link" aria-label="Direct link to Ports" title="Direct link to Ports">​</a></h3>
<p>The following is an outline of the services that can be exposed by charon.</p>
<ul>
<li>
<p><strong>:3600</strong> - The validator REST API. This is the port that serves the consensus layer&#x27;s <a href="https://ethereum.github.io/beacon-APIs/" target="_blank" rel="noopener noreferrer">beacon node API</a>. This is the port validator clients should talk to instead of their standard consensus client REST API port. Charon subsequently proxies these requests to the upstream consensus client specified by <code>--beacon-node-endpoints</code>.</p>
</li>
<li>
<p><strong>:3610</strong> - Charon P2P port. This is the port that charon clients use to communicate with one another via TCP. This endpoint should be port-forwarded on your router and exposed publicly, preferably on a static IP address. This IP address should then be set on the charon run command with <code>--p2p-external-ip</code> or <code>CHARON_P2P_EXTERNAL_IP</code>.</p>
</li>
<li>
<p><strong>:3620</strong> - Monitoring port. This port hosts a webserver that serves prometheus metrics on <code>/metrics</code>, a readiness endpoint on <code>/readyz</code> and a liveness endpoint on <code>/livez</code>, and a pprof server on <code>/debug/pprof</code>. This port should not be exposed publicly.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<p>For more information on running charon, take a look at our <a href="/v0.17.0/int/quickstart">Quickstart Guides</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ObolNetwork/obol-docs/edit/main/versioned_docs/version-v0.17.0/charon/intro.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v0.17.0/int/faq/threat_model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Charon threat model</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v0.17.0/charon/dkg"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Distributed Key Generation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-charon" class="table-of-contents__link toc-highlight">What is Charon?</a></li><li><a href="#charon-architecture" class="table-of-contents__link toc-highlight">Charon Architecture</a><ul><li><a href="#determine-when-duties-need-to-be-performed" class="table-of-contents__link toc-highlight">Determine <strong>when</strong> duties need to be performed</a></li><li><a href="#fetch-and-come-to-consensus-on-what-data-to-sign" class="table-of-contents__link toc-highlight">Fetch and come to consensus on <strong>what</strong> data to sign</a></li><li><a href="#wait-for-the-vc-to-sign" class="table-of-contents__link toc-highlight"><strong>Wait</strong> for the VC to sign</a></li><li><a href="#share-partial-signatures" class="table-of-contents__link toc-highlight"><strong>Share</strong> partial signatures</a></li><li><a href="#threshold-aggregate-partial-signatures" class="table-of-contents__link toc-highlight"><strong>Threshold Aggregate</strong> partial signatures</a></li><li><a href="#broadcast-final-signature" class="table-of-contents__link toc-highlight"><strong>Broadcast</strong> final signature</a></li><li><a href="#ports" class="table-of-contents__link toc-highlight">Ports</a></li></ul></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/next/learn/intro/obol-collective">Intro to Obol</a></li><li class="footer__item"><a class="footer__link-item" href="/next/learn/charon/intro">Charon</a></li><li class="footer__item"><a class="footer__link-item" href="/next/learn/intro/launchpad">DV Launchpad</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/n6ebKsX46w" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/obolnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.obol.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/obolnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://status.obol.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://obol.tech/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/ObolLineWhite.svg" alt="Obol Network Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="30px" height="30px"><img src="/img/ObolLineWhite.svg" alt="Obol Network Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="30px" height="30px"></a></div><div class="footer__copyright">Copyright © 2024 Obol Labs, Inc. </div></div></div></footer></div>
</body>
</html>